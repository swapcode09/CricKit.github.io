<!DOCTYPE HTML>
<html lang="en">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>CricKit Mobile</title>
<link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
<link rel="stylesheet" type="text/css" href="styles/cointoss.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">

<link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">

</head>
<body class="theme-light">
<div id="preloader"><div class="spinner-border color-highlight" role="status"></div></div>
<div id="page">
<div class="header header-fixed header-logo-center header-auto-show">
<a href="index.html" class="header-title">Create Teams</a>
<a href="#" data-back-button class="header-icon header-icon-1"><i class="fas fa-chevron-left"></i></a>
<a href="#" data-menu="menu-main" class="header-icon header-icon-4"><i class="fas fa-bars"></i></a>
<a href="#" data-toggle-theme class="header-icon header-icon-3 show-on-theme-dark"><i class="fas fa-sun"></i></a>
<a href="#" data-toggle-theme class="header-icon header-icon-3 show-on-theme-light"><i class="fas fa-moon"></i></a>
</div>
<div id="footer-bar" class="footer-bar-6">
<a href="oldmatches.html"><i class="fa fa-layer-group"></i><span>History</span></a>
<a href="viewmatches.html"><i class="fa fa-file"></i><span>View Matches</span></a>
<a href="menu.html" class="circle-nav active-nav"><i class="fa fa-home"></i><span>Welcome</span></a>
<a href="matches.html">⚾︎<span>Add Matches</span></a>
<a href="teams.html" data-menu="menu-main">✿<span>Add Team</span></a>
<!-- <a href="viewteams.html" data-menu="menu-main">✿<span>View Teams</span></a> -->
</div>
<div class="page-title page-title-fixed">
<h1>Create Match</h1>

<button class="page-title-icon shadow-xl bg-theme color-theme" data-menu="menu-share" onClick="window.location.reload();">&#x21bb;</button>

<a href="#" class="page-title-icon shadow-xl bg-theme color-theme show-on-theme-light" data-toggle-theme><i class="fa fa-moon"></i></a>

<a href="#" class="page-title-icon shadow-xl bg-theme color-theme show-on-theme-dark" data-toggle-theme><i class="fa fa-lightbulb color-yellow-dark"></i></a>

<a href="#" class="page-title-icon shadow-xl bg-theme color-theme" data-menu="menu-main"><i class="fa fa-bars"></i></a>
</div>
<div class="page-title-clear"></div>
<div class="page-content">

<div class="card card-style">
<div class="content mb-0">
<h3>Enter Details</h3>
<p>
Fill in the information correctly to save the match information.
</p>
<p>
<strong>Click refresh button on top to load the data in case it shows blank.</strong>
</p>
        
<label for="form5" class="color-highlight">Select Team A</label>
<div class="input-style has-borders no-icon mb-4">
      <form id="form1">
        <select id="teamaplayerdisplay">
        

        </select>
      </form>
<span><i class="fa fa-chevron-down"></i></span>
<i class="fa fa-check disabled valid color-green-dark"></i>
<i class="fa fa-check disabled invalid color-red-dark"></i>
<em></em>
</div>

<label for="form5" class="color-highlight">Select Team B</label>
<div class="input-style has-borders no-icon mb-4">
      <form id="form2">
        <select id="teambplayerdisplay">
        

        </select>
      </form>
<span><i class="fa fa-chevron-down"></i></span>
<i class="fa fa-check disabled valid color-green-dark"></i>
<i class="fa fa-check disabled invalid color-red-dark"></i>
<em></em>
</div>


<button class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-yellow-light" type="submit" id="buttonsaveteams">Save Teams</button>


<label for="form5" class="color-highlight">Select Lineup Team A</label>
<div class="input-style has-borders no-icon mb-4">
      <form id="form1">
          
                  <select multiple="multiple" id="lineupteamA">
                    
                  </select>    
      </form>
<span><i class="fa fa-chevron-down"></i></span>
<i class="fa fa-check disabled valid color-green-dark"></i>
<i class="fa fa-check disabled invalid color-red-dark"></i>
<em></em>
</div>

        <div class="ms-3 me-3 alert alert-small rounded-s shadow-xl bg-green-dark" role="alert" id="sforlina" style="visibility: hidden;">
        </div>
<button class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-red-light" type="submit" id="savelineupA">Save Lineup A</button>


<label for="form5" class="color-highlight">Select Lineup Team B</label>   
<div class="input-style has-borders no-icon mb-4">
      <form id="form1">
          
                  <select multiple="multiple" id="lineupteamB">
                    
                  </select>    
      </form>
<span><i class="fa fa-chevron-down"></i></span>
<i class="fa fa-check disabled valid color-green-dark"></i>
<i class="fa fa-check disabled invalid color-red-dark"></i>
<em></em>
</div>

        <div class="ms-3 me-3 alert alert-small rounded-s shadow-xl bg-green-dark" role="alert" id="sforlinb" style="visibility: hidden;">
        </div>
<button class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-red-light" type="submit" id="savelineupB">Save Lineup B</button>

  
        <div class="input-style has-borders has-icon validate-field mb-4">
        <input type="name" class="form-control validate-name" id="matchname" placeholder="Match name">
        <label for="form1" class="color-highlight">Match Name</label>
        <i class="fa fa-times disabled invalid color-red-dark"></i>
        <i class="fa fa-check disabled valid color-green-dark"></i>
        <em>(required)</em>
        </div>

        <div class="input-style has-borders has-icon validate-field mb-4">
        <input type="name" class="form-control validate-name" id="groundname" placeholder="Ground name">
        <label for="form1" class="color-highlight">Ground Name</label>
        <i class="fa fa-times disabled invalid color-red-dark"></i>
        <i class="fa fa-check disabled valid color-green-dark"></i>
        <em>(required)</em>
        </div>

        <div class="input-style has-borders has-icon validate-field mb-4">
        <input type="number" class="form-control validate-name" id="noofovers" placeholder="No of overs">
        <label for="form1" class="color-highlight">Overs</label>
        <i class="fa fa-times disabled invalid color-red-dark"></i>
        <i class="fa fa-check disabled valid color-green-dark"></i>
        <em>(required)</em>
        </div>


<label for="form5" class="color-highlight">Try Virtual Coin Toss</label>
<div class="input-style has-borders has-icon validate-field mb-4">   
        <div class="coin" id="coin">
            <div class="heads">
                <img src="images/heads.svg">
            </div>
            <div class="tails">
                <img src="images/tails.svg">
            </div>
        </div>
        <center><h3 id="tossresult"></h3></center>
        <div class="buttons">
            <button id="flip-button" class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-yellow-light">
                Flip Coin
            </button>
            <button id="reset-button" class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-dark-dark">
                Reset
            </button>
        </div>
</div>

<label for="form5" class="color-highlight">Toss won by</label>
<div class="form-check" id="displaytwoteams">

</div>

<label for="form5" class="color-highlight">Opted to</label>
<div class="form-check" id="displaychoice">

</div>

<div class="ms-3 me-3 alert alert-small rounded-s shadow-xl bg-green-dark" role="alert" id="successformatchadd" style="visibility: hidden;">

</div>

<center><button class="btn btn-m btn-full mb-3 rounded-xs text-uppercase font-700 shadow-s bg-dark-dark" type="submit" id="schedulematch">Schedule Match</button></center>


<script type="text/javascript" src="scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
<script type="text/javascript" src="scripts/cointoss.js"></script>


<script>

const reloadUsingLocationHash = () => 
    {
      window.location.hash = "reload";
    }
    window.onload = reloadUsingLocationHash();

const form1 = document.getElementById('form1');
const form2 = document.getElementById('form2');

const lineupteamA = document.getElementById('lineupteamA');
const lineupteamB = document.getElementById('lineupteamB');

/* const otherdetsform = document.getElementById('otherdetsform'); */

const buttonsaveteam = document.getElementById('buttonsaveteams');

const buttonsavelineupA = document.getElementById('savelineupA'); 
const buttonsavelineupB = document.getElementById('savelineupB'); 

const creatematch = document.getElementById('creatematch'); 
const schedulematch = document.getElementById('schedulematch'); 


</script>

<script type="module">
  
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";

          import { getDatabase , set , ref , push , child , onValue , get } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
          
          var firebaseConfig = 
          {
            apiKey: "AIzaSyAest1kY2wkdzwWCPf7-bkwyhWLekXZDhE",
            authDomain: "cricket-master-d3c58.firebaseapp.com",
            databaseURL: "https://cricket-master-d3c58-default-rtdb.firebaseio.com",
            projectId: "cricket-master-d3c58",
            storageBucket: "cricket-master-d3c58.appspot.com",
            messagingSenderId: "554998698559",
            appId: "1:554998698559:web:6617512d672bc484305e8a"
          };

          
          const app = initializeApp(firebaseConfig);
          const database = getDatabase(app);



var tbody = document.getElementById('tbody1');

var toss;

var optedto;


schedulematch.addEventListener('click', () => 
{

  var groundname = document.getElementById("groundname").value;
  var noofovers = document.getElementById("noofovers").value;
  var matchname = document.getElementById("matchname").value;

  localStorage.setItem("TotalOvers",noofovers);
                

  var ele = document.getElementsByName("teamtoss");

  var con = document.getElementsByName("playchoice");

  var battingfirstteam;
  var bowlingfirstteam;

  for(var i = 0; i < ele.length; i++) 
  {
                if(ele[i].checked)
                toss = ele[i].value;
                localStorage.setItem("Toss",toss);
                
  }

   for(var j = 0; j < con.length; j++) 
  {
                if(con[j].checked)
                optedto = con[j].value;
                localStorage.setItem("optedto",optedto);
                
  }

              if (toss == teamaselected && optedto == "Bat")
               {
                    battingfirstteam = teamaselected;
                    bowlingfirstteam = teambselected;
               }

               if (toss == teamaselected && optedto == "Bowl")
               {
                    battingfirstteam = teambselected;
                    bowlingfirstteam = teamaselected;
               }

               if (toss == teambselected && optedto == "Bat")
               {
                    battingfirstteam = teambselected;
                    bowlingfirstteam = teamaselected;
               }

               if (toss == teambselected && optedto == "Bowl")
               {
                    battingfirstteam = teamaselected;
                    bowlingfirstteam = teambselected;
               }


         localStorage.setItem("battingfirst",teamaselected);
         localStorage.setItem("bowlingfirst",teambselected);

  /* console.log("Team A is"+teamaselected);
  console.log("Team B is"+teambselected);

  console.log("Team A playesr"+teama);
  console.log("Team B playesr"+teamb);

  console.log("Match Name"+matchname);
  console.log("Ground name"+groundname);
  console.log("Overs"+noofovers);
  console.log("Toss"+toss);
  console.log("Opted to"+optedto); */



               set (ref(database,'Matches/'+matchname) , {
                                    MatchID : matchname,
                                    Team1 : teamaselected,
                                    Team2 : teambselected,
                                    teamaselected : teama,
                                    teambselected : teamb,
                                    Overs : noofovers,
                                    Ground : groundname,
                                    Toss : toss,
                                    OptedTo : optedto,
                                    teambattingfirst : battingfirstteam,
                                    teambowlingfirst : bowlingfirstteam
                                  });


                              set (ref(database,matchname+"/"+"Data/") , {
                                    MatchID : matchname,
                                    Team1 : teamaselected,
                                    Team2 : teambselected,
                                    teamaselected : teama,
                                    teambselected : teamb,
                                    Overs : noofovers,
                                    Ground : groundname,
                                    Toss : toss,
                                    OptedTo : optedto,
                                    teambattingfirst : battingfirstteam,
                                    teambowlingfirst : bowlingfirstteam
                                  });

    document.getElementById("successformatchadd").style.visibility="visible";

             document.getElementById("successformatchadd").innerHTML = `<span><i class="fa fa-check color-white"></i></span>
                <strong class="color-white">Match created successfully!</strong>
                <button type="button" class="close color-white opacity-60 font-16" data-bs-dismiss="alert" aria-label="Close">&times;</button>`

        location.replace("viewmatches.html");

});


const playeref = ref(database,"Teams/");
const matchref = ref(database,"Matches/");

function readteamsandmatches() 
{
  
  onValue(playeref,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("teamaplayerdisplay").innerHTML += `
      <option value="${issue.Team}">${issue.Team}</option>
      `
  
      document.getElementById("teambplayerdisplay").innerHTML += `
      <option value="${issue.Team}">${issue.Team}</option>`

    })
  })
}


  var teamaselected;
  var teambselected;

buttonsaveteam.addEventListener('click', () => 
{

  teamaselected = document.getElementById("teamaplayerdisplay").value;

  document.getElementById("lineupteamA").innerHTML="";
  document.getElementById("lineupteamB").innerHTML="";

   localStorage.setItem("teamaselected",teamaselected);

  teambselected = document.getElementById("teambplayerdisplay").value;

  localStorage.setItem("teambselected",teambselected);

  const getteamaplayers = ref(database,'Teams/'+teamaselected);

  const gettebmaplayers = ref(database,'Teams/'+teambselected);

  const opt1 = "Bat";
  const opt2 = "Bowl";

       document.getElementById("displaytwoteams").innerHTML += 
      `<input class="form-check-input" type="radio" name="teamtoss" id="${teamaselected}" value="${teamaselected}">
                              <label class="form-check-label" for="flexRadioDefault2">${teamaselected}</label>

                              <br>
      <input class="form-check-input" type="radio" name="teamtoss" id="${teambselected}" value="${teambselected}">
                              <label class="form-check-label" for="flexRadioDefault2">${teambselected}</label>

                          <br><br>`



        document.getElementById("displaychoice").innerHTML += 
      `<input class="form-check-input" type="radio" name="playchoice" id="${opt1}" value="${opt1}">
                              <label class="form-check-label" for="flexRadioDefault2">${opt1}</label>

                              <br>
      <input class="form-check-input" type="radio" name="playchoice" id="${opt2}" value="${opt2}">
                              <label class="form-check-label" for="flexRadioDefault2">${opt2}</label>

                          <br><br>`
  

  onValue(getteamaplayers,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("lineupteamA").innerHTML += `
            <option value="${issue}">${issue}</option>
             </form> `
    })
  })

  onValue(gettebmaplayers,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("lineupteamB").innerHTML += `
            <option value="${issue}">${issue}</option>
             </form>` 
    })
  })
});


var teama = [];
var teamb = [];

buttonsavelineupA.addEventListener('click', () => 
{

  

  for (var option of document.getElementById('lineupteamA').options)
    {
        if (option.selected) {
            teama.push(option.value);
        }
    }

    document.getElementById("sforlina").style.visibility="visible";

             document.getElementById("sforlina").innerHTML = `<span><i class="fa fa-check color-white"></i></span>
                <strong class="color-white">Team A lineup stored!</strong>
                <button type="button" class="close color-white opacity-60 font-16" data-bs-dismiss="alert" aria-label="Close">&times;</button>`

});


buttonsavelineupB.addEventListener('click', () => 
{

  for (var option of document.getElementById('lineupteamB').options)
    {
        if (option.selected) {
            teamb.push(option.value);
        }
    }

    document.getElementById("sforlinb").style.visibility="visible";

             document.getElementById("sforlinb").innerHTML = `<span><i class="fa fa-check color-white"></i></span>
                <strong class="color-white">Team B lineup stored!</strong>
                <button type="button" class="close color-white opacity-60 font-16" data-bs-dismiss="alert" aria-label="Close">&times;</button>`

});


window.onload=readteamsandmatches;

</script>


<script>
   function cr7(ele) 
   {
      var btnValue = ele.value;
      var initial_ui_opened = 0;
      localStorage.setItem("selectedmatch",btnValue);
      localStorage.setItem("initial_ui_opened",initial_ui_opened);      
      return false;
  }
</script>


</body>
</html>